<div class="merchants">
  <div class="merchants-header">
    <h3 class="merchants-heading">Merchants</h3>
    <div class="header-right">

      <div class="entries-info">
        <div class="search cstm_search">
          <mat-form-field>
            <input class="search-entry" matInput [(ngModel)]="searchQuery" [formControl]="searchControl"
              placeholder="Enter search term">
            <mat-icon>search</mat-icon>
          </mat-form-field>
        </div>
      </div>

      <div class="btn-export" (click)="exportToCSV()">
        <button class="export">Export CSV
          <img src="images/export.png" alt="image">
        </button>
      </div>
      <div class="btn-import">
        <button class="import" (click)="fileInput.click()">Import CSV
          <input type="file" (change)="importCSV($event)" style="display: none;" #fileInput>
          <img src="images/import.png" alt="image">
        </button>
      </div>

      <div class="btn-add">
        <button mat-raised-button class="add" (click)="onAddOpen()">Add
          <img src="images/add-circle-trans.png" alt="image">
        </button>
      </div>
    </div>
  </div>

  <div class="table-data">
    <div class="merchants-data">
      <div class="mat-elevation-z8 table-container">
        <table mat-table [dataSource]="dataSource" matSort>
          
          <!-- StoreID Column -->
          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Business ID </th>
            <td mat-cell *matCellDef="let element"> {{element.id}} </td>
          </ng-container>

          <!-- Merchant Name Column -->
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Merchant Name </th>
            <td mat-cell *matCellDef="let element"> {{element.name}} </td>
          </ng-container>
          
          <!-- Email Column -->
          <ng-container matColumnDef="email">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Email </th>
            <td mat-cell *matCellDef="let element"> {{element.email}} </td>
          </ng-container>

          <!-- Address Column -->
          <ng-container matColumnDef="address">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Address </th>
            <td mat-cell *matCellDef="let element"> {{element.address}} </td>
          </ng-container>

          <!-- business Type Column -->
          <ng-container matColumnDef="businessType">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Business Type </th>
            <td mat-cell *matCellDef="let element"> {{element.phone}} </td>
          </ng-container>

          <!-- working Hours Column -->
          <ng-container matColumnDef="workingHours">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Working Hours </th>
            <td mat-cell *matCellDef="let element"> {{element.servicable}} </td>
          </ng-container>

          <!-- Status Column -->
          <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Status </th>
            <td mat-cell *matCellDef="let element">
              <mat-slide-toggle class="custom-slide-toggle" [(ngModel)]="element.status"
                (change)="onToggleChange(element)"></mat-slide-toggle>
            </td>
          </ng-container>

          <!-- Action Column -->
          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef> Action </th>
            <td mat-cell *matCellDef="let element">
              <div class="merchant-edit-btn">
                <mat-card>
                  <mat-card-content>
                    <section>
                      <mat-menu #menu1="matMenu" class="mat-menu">
                        <button class="edit-btn all-menu-btn" mat-menu-item (click)="onEdit(element)">Edit</button>
                        <button class="delete-btn all-menu-btn" mat-menu-item
                          (click)="onDelete(element.id)">Delete</button>
                        <button class="block-btn all-menu-btn" mat-menu-item>Block</button>
                      </mat-menu>
                      <button mat-icon-button [matMenuTriggerFor]="menu1" aria-label="Open Menu">
                        <mat-icon>more_vert</mat-icon>
                      </button>
                    </section>
                  </mat-card-content>
                </mat-card>
              </div>
            </td>
          </ng-container>

          <!-- Header Row -->
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

          <!-- Data Rows -->
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
      </div>
    </div>

    <div class="merchants-footer">
      <mat-paginator class="merchants-paginator" [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons
        aria-label="Select page of periodic elements"></mat-paginator>
    </div>
  </div>
</div>